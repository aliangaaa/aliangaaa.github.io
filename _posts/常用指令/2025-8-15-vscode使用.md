---
layout: post
title: vscode使用
category: 常用指令
tags: Essay
keywords: 
description: 
---

## cpp的编译
### intellisense 配置（代码补全工具）
F1 找到select Intellisense configuration 选择cl.exe
### 编译器选择配置
F1 找到Edit Configurations 配置编译器

（以上两项cmake编译时都不需要配置，cmake时，直接就会让你选择编译器读cmakeLists.txt）
### 单文件runner
需要执行以上两步骤并且msvc需要在settings.json加上
```
"C_Cpp_Runner.useMsvc": true,
```
### 多文件cmakelist
#### 1. 安装插件
C/C++（Microsoft） → 提供 IntelliSense、调试支持
CMake Tools（Microsoft） → 提供 CMake 构建、配置、调试集成

#### 2.编写CMakeLists.txt
```
cmake_minimum_required(VERSION 3.10)

project(ProducerConsumerExample LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

add_executable(producer_consumer test.cpp)

find_package(Threads REQUIRED)
target_link_libraries(producer_consumer PRIVATE Threads::Threads)

if(MSVC)
    target_compile_options(producer_consumer PRIVATE /W4 /permissive-)
else()
    target_compile_options(producer_consumer PRIVATE -Wall -Wextra -pedantic)
endif()
```

#### 3.打开 VS Code
打开 code1 文件夹
VS Code 右下角会显示 [No Kit Selected] → 点击选择编译器 Kit（比如 Visual Studio 2022 x64 用 MSVC）。
我这边是自动弹出选择编译器。错过了也可以点击生成，选择编译器。

#### 4. 配置构建目录（可选）
```
.vscode/settings.json 示例：
{
    "cmake.sourceDirectory": "${workspaceFolder}",
    "cmake.buildDirectory": "${workspaceFolder}/build"
}
```
默认 CMake Tools 会在项目下生成 build/ 文件夹
可以自定义构建目录

#### 5.构建项目
Ctrl+Shift+P → CMake: Configure → 配置项目
Ctrl+Shift+P → CMake: Build → 编译生成可执行文件

我是直接添加到工作区就开始configure，generate。
然后点左下角的生成。
可执行文件会在 build/producer_consumer.exe
点击生成会执行configure，generate及make makeinstall
